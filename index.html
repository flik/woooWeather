<!DOCTYPE html> 
<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>


<body onload="getLocation()">
 
 
<select name="nationality" id="nationality" > 
	<option value="">Select Location </option> 
	<option value="Canada">Canada </option> 
	<option value="uk">United Kingdom </option> 
	<option value="USVI">Charlotte Amalie </option> 
</select>
 
<div id="input"> 
	
	
</div>

<p id="browserMsg">   </p>

 
<script>
	
	//For error message
	var x = document.getElementById("browserMsg");

	// Getting input data in case denies location
	$( "#nationality" ).change(function() {
		var country = $("#nationality").val();
		var apiurl = "http://api.openweathermap.org/data/2.5/weather?q=,"+ 
					country+"&mode=html&appid=44db6a862fba0b067b1930da0d769e98" ;
		$("#input").html('Loading...');
		$.get(apiurl, function(data, status){
			$("#input").html(data);
		});
	});
	
	//Getting location and showing weather
	function getLocation() {
		if (navigator.geolocation) {
			
			navigator.geolocation.getCurrentPosition(showPosition);
		} else { 
			x.innerHTML = "Geolocation is not supported by this browser.";
			alert("Not Shared");
		}
	}

	function showPosition(position) {
		
		var apiurl = "http://api.openweathermap.org/data/2.5/weather?lat="+ 
					position.coords.latitude+"&lon="+position.coords.longitude+
					"&mode=html&appid=44db6a862fba0b067b1930da0d769e98" ;
			$("#nationality").hide();
			$("#input").html('Loading...');
		$.get(apiurl, function(data, status){
			$("#input").html(data);
		});
		
	}
	 

</script>

</body>
</html>
